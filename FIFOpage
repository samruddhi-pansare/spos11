#include <iostream>
#include <queue>
#include <set>
using namespace std;

int main() {
    int pages[] = {2, 3, 2, 1, 5, 2, 4, 5, 3, 2, 5, 2};
    int n = sizeof(pages)/sizeof(pages[0]);
    int frames = 3;

    queue<int> q;        // FIFO queue
    set<int> s;          // to check if page is already in memory
    int faults = 0;

    for(int i = 0; i < n; i++){
        if(s.find(pages[i]) == s.end()){ // page fault
            faults++;
            if(q.size() == frames){
                int old = q.front(); q.pop(); // remove oldest page
                s.erase(old);
            }
            q.push(pages[i]);
            s.insert(pages[i]);
        }
        // print current frame content
        cout << "Page " << pages[i] << ": ";
        queue<int> temp = q;
        while(!temp.empty()){ cout << temp.front() << " "; temp.pop(); }
        cout << endl;
    }

    cout << "\nTotal Page Faults: " << faults << endl;
    return 0;
}
